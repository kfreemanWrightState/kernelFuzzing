CONFIG_TARGET_x86=y
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_BOARD="x86"
CONFIG_TARGET_SUBTARGET="64"
CONFIG_TARGET_ARCH_PACKAGES="x86_64"
CONFIG_CPU_TYPE="x86_64"
CONFIG_DEFAULT_TARGET_OPTIMIZATION="-O2 -pipe -march=x86-64"

CONFIG_TARGET_ROOTFS_PARTSIZE=512
CONFIG_TARGET_KERNEL_PARTSIZE=512

CONFIG_EFI_IMAGES=y
CONFIG_GRUB_IMAGES=y

# === Kexec and crash dump features ===
CONFIG_KEXEC=y
# CONFIG_KEXEC_FILE is not set
CONFIG_CRASH_DUMP=y
CONFIG_CRASH_HOTPLUG=y
CONFIG_CRASH_MAX_MEMORY_RANGES=8192


# === x86 CPU / Debugging options ===

# Don't emulate vsyscalls (legacy feature, not needed)
# CONFIG_X86_VSYSCALL_EMULATION is not set

# Allow user-space I/O permissions (needed by some tools)
CONFIG_X86_IOPL_IOPERM=y

# Machine Check Exception injector (for testing hardware errors)
# Not needed for most builds
# CONFIG_X86_MCE_INJECT is not set

# Microcode loading options
# Early loading is handled by default if needed; late loading is risky
# CONFIG_MICROCODE_LATE_LOADING is not set

# Mitigate Spectre-BHB (Branch History Injection)
CONFIG_MITIGATION_SPECTRE_BHI=y

# Enable Indirect Target Selection mitigation (helps against speculative branch attacks)
CONFIG_MITIGATION_ITS=y

# --- Kernel Debugging ---
CONFIG_KERNEL_KGDB=y
CONFIG_KERNEL_DEBUG_INFO=y
CONFIG_KERNEL_DEBUG_KERNEL=y
CONFIG_KERNEL_DEBUG_VM=y
CONFIG_KERNEL_PRINTK_TIME=y
CONFIG_KERNEL_PANIC_TIMEOUT=180
CONFIG_KERNEL_KALLSYMS=y
CONFIG_KERNEL_KALLSYMS_ALL=y
CONFIG_KERNEL_STACKTRACE_BUILD_ID=y

# --- Sanitizers (KASAN, KCOV, UBSAN) ---
# Kernel Address Sanitizer (KASAN)
CONFIG_KERNEL_KASAN=y
CONFIG_KERNEL_KASAN_GENERIC=y
CONFIG_KERNEL_KASAN_INLINE=y
CONFIG_KERNEL_STACKTRACE=y
CONFIG_KERNEL_SLUB=y
CONFIG_KERNEL_SLUB_DEBUG=y
CONFIG_KERNEL_TEST_KASAN=y

# Kernel Coverage (KCOV)
CONFIG_KERNEL_KCOV=y
#CONFIG_KERNEL_KCOV_ENABLE_COMPARISONS=y
#CONFIG_KERNEL_KCOV_INIT_TRACE=y

# Undefined Behavior Sanitizer (UBSAN)
#CONFIG_KERNEL_UBSAN=y
#CONFIG_KERNEL_UBSAN_BOUNDS=y
#CONFIG_KERNEL_UBSAN_SHIFT=y
#CONFIG_KERNEL_UBSAN_ALIGNMENT=y
#CONFIG_KERNEL_UBSAN_DIV_BY_ZERO=y
#CONFIG_KERNEL_UBSAN_UNREACHABLE=y
#CONFIG_KERNEL_UBSAN_NULL=y
#CONFIG_KERNEL_UBSAN_BOOL=y
#CONFIG_KERNEL_UBSAN_ENUM=y

# --- USB Fuzzing (Raw Gadget) ---
CONFIG_KERNEL_USB_RAW_GADGET=y
# Raw Gadget is for debugging and fuzzing and is not intended for production.
# For virtual environments like QEMU, also enable Dummy UDC.
CONFIG_KERNEL_USB_DUMMY_HCD=y
CONFIG_KERNEL_USB_DUMMY_UDC=y

# --- General Fuzzing and Debugging tools ---
# syzkaller-specific config (often required for syz-executor)
#CONFIG_KERNEL_DEBUG_INFO_DWARF4=y
#CONFIG_KERNEL_CONFIGFS_FS=y
#CONFIG_KERNEL_INOTIFY_USER=y
#CONFIG_KERNEL_DEBUG_FS=y
#CONFIG_KERNEL_SECURITYFS=y
#CONFIG_KERNEL_DEVMEM=y
#CONFIG_KERNEL_PROC_KCORE=y
#CONFIG_KERNEL_PROFILING=y
#CONFIG_KERNEL_FTRACE=y
#CONFIG_KERNEL_FTRACE_SYSCALLS=y
#CONFIG_KERNEL_FUNCTION_TRACER=y
#CONFIG_KERNEL_FUNCTION_GRAPH_TRACER=y
#CONFIG_KERNEL_TRACING=y
#CONFIG_KERNEL_LOCKDEP=y
#CONFIG_KERNEL_DEBUG_OBJECTS=y
#CONFIG_KERNEL_DEBUG_OBJECTS_ENABLE_DEFAULT=y
#CONFIG_KERNEL_DEBUG_RT_MUTEXES=y
#CONFIG_KERNEL_DEBUG_SPINLOCKS=y
#CONFIG_KERNEL_DEBUG_MUTEXES=y
#CONFIG_KERNEL_PROVE_LOCKING=y
#CONFIG_KERNEL_DEBUG_PERF_USE_VMALLOC=y


